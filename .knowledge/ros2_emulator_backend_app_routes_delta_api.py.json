{"is_source_file": true, "format": "Python (Flask-based REST API)", "description": "This file defines REST API endpoints for the DeltaAPI in a robotics emulator project. It exposes various robot control functions like digital I/O, Modbus, point management, robot state retrieval, and script execution. The code primarily sets up Flask route handlers, schemas for request validation, and interactions with emulator state and Lua interpreter modules.", "external_files": ["../emulator_state", "../lua_interpreter"], "external_methods": ["emulator_state.get_di", "emulator_state.set_do", "emulator_state.get_global_point", "emulator_state.set_global_point", "emulator_state.read_modbus", "emulator_state.write_modbus", "emulator_state.current_position", "emulator_state.joint_angles", "emulator_state.motion_settings", "lua_interpreter.execute_script"], "published": ["blp"], "classes": [{"name": "DIRequestSchema", "description": "Schema for Digital Input read request"}, {"name": "DORequestSchema", "description": "Schema for Digital Output write request"}, {"name": "ModbusReadSchema", "description": "Schema for Modbus read request"}, {"name": "ModbusWriteSchema", "description": "Schema for Modbus write request"}, {"name": "SetPointSchema", "description": "Schema for SetGlobalPoint request"}, {"name": "ScriptExecuteSchema", "description": "Schema for script execution request"}], "methods": [{"name": "DigitalInputAPI.post", "description": "Handles reading digital input pins"}, {"name": "DigitalOutputAPI.post", "description": "Handles setting digital output pins and optional delay"}, {"name": "DigitalOutputAPI.get", "description": "Retrieves current states of all digital outputs"}, {"name": "ModbusReadAPI.post", "description": "Handles reading Modbus registers"}, {"name": "ModbusWriteAPI.post", "description": "Handles writing to Modbus registers"}, {"name": "SetPointAPI.post", "description": "Stores a global point with specified coordinates and parameters"}, {"name": "GetPointAPI.get", "description": "Retrieves a stored global point by number"}, {"name": "RobotPositionAPI.get", "description": "Retrieves current robot position and joint angles"}, {"name": "ScriptExecuteAPI.post", "description": "Executes a Lua script"}, {"name": "ScriptUploadAPI.post", "description": "Uploads and executes a Lua script file"}, {"name": "get(self)", "scope": "RobotPositionAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, point_num)", "scope": "GetPointAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self)", "scope": "ScriptUploadAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, args)", "scope": "SetPointAPI", "scopeKind": "class", "description": "unavailable"}], "calls": ["emulator_state.get_di", "emulator_state.set_do", "emulator_state.get_global_point", "emulator_state.set_global_point", "emulator_state.read_modbus", "emulator_state.write_modbus", "lua_interpreter.execute_script"], "search-terms": ["DeltaAPI", "REST API", "digital input", "digital output", "modbus", "point management", "robot position", "Lua scripting", "emulator_state", "lua_interpreter"], "state": 2, "file_id": 9, "knowledge_revision": 29, "git_revision": "bd033e269312a1593b33875149da9b16d97faeec", "revision_history": [{"23": ""}, {"29": "bd033e269312a1593b33875149da9b16d97faeec"}], "ctags": [{"_type": "tag", "name": "DIRequestSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class DIRequestSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DORequestSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class DORequestSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DigitalInputAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class DigitalInputAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DigitalOutputAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class DigitalOutputAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GetPointAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class GetPointAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ModbusReadAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ModbusReadAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ModbusReadSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ModbusReadSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ModbusWriteAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ModbusWriteAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ModbusWriteSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ModbusWriteSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RobotPositionAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class RobotPositionAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ScriptExecuteAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ScriptExecuteAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ScriptExecuteSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ScriptExecuteSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ScriptUploadAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class ScriptUploadAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SetPointAPI", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class SetPointAPI(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SetPointSchema", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^class SetPointSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "address", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    address = fields.Int(required=True, description=\"Register address (hex or decimal)\")$/", "language": "Python", "kind": "variable", "scope": "ModbusReadSchema", "scopeKind": "class"}, {"_type": "tag", "name": "address", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    address = fields.Int(required=True, description=\"Register address (hex or decimal)\")$/", "language": "Python", "kind": "variable", "scope": "ModbusWriteSchema", "scopeKind": "class"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    delay = fields.Float(required=False, description=\"Delay time in seconds\")$/", "language": "Python", "kind": "variable", "scope": "DORequestSchema", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DigitalOutputAPI", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RobotPositionAPI", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def get(self, point_num):$/", "language": "Python", "kind": "member", "signature": "(self, point_num)", "scope": "GetPointAPI", "scopeKind": "class"}, {"_type": "tag", "name": "length", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    length = fields.Int(required=False, description=\"Number of consecutive pins to read\")$/", "language": "Python", "kind": "variable", "scope": "DIRequestSchema", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    name = fields.Str(required=True, description=\"Point name (must start with GL_)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "pin", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    pin = fields.Int(required=True, description=\"Pin number (1-12)\")$/", "language": "Python", "kind": "variable", "scope": "DORequestSchema", "scopeKind": "class"}, {"_type": "tag", "name": "pin", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    pin = fields.Int(required=True, description=\"Pin number (1-24)\")$/", "language": "Python", "kind": "variable", "scope": "DIRequestSchema", "scopeKind": "class"}, {"_type": "tag", "name": "point_num", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    point_num = fields.Int(required=True, description=\"Point number (1-1000)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ScriptUploadAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "DigitalInputAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "DigitalOutputAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "ModbusReadAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "ModbusWriteAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "ScriptExecuteAPI", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    def post(self, args):$/", "language": "Python", "kind": "member", "signature": "(self, args)", "scope": "SetPointAPI", "scopeKind": "class"}, {"_type": "tag", "name": "rx", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    rx = fields.Float(required=False, default=0.0, description=\"RX rotation (degrees)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "ry", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    ry = fields.Float(required=False, default=0.0, description=\"RY rotation (degrees)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "rz", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    rz = fields.Float(required=False, default=0.0, description=\"RZ rotation (degrees)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "script", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    script = fields.Str(required=True, description=\"Lua script code to execute\")$/", "language": "Python", "kind": "variable", "scope": "ScriptExecuteSchema", "scopeKind": "class"}, {"_type": "tag", "name": "size", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    size = fields.Str(required=True, description=\"W (16-bit) or DW (32-bit)\")$/", "language": "Python", "kind": "variable", "scope": "ModbusReadSchema", "scopeKind": "class"}, {"_type": "tag", "name": "size", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    size = fields.Str(required=True, description=\"W (16-bit) or DW (32-bit)\")$/", "language": "Python", "kind": "variable", "scope": "ModbusWriteSchema", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    status = fields.Str(required=True, description=\"ON or OFF\")$/", "language": "Python", "kind": "variable", "scope": "DORequestSchema", "scopeKind": "class"}, {"_type": "tag", "name": "tf", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    tf = fields.Int(required=False, default=0, description=\"Tool frame (0-9)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "uf", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    uf = fields.Int(required=False, default=0, description=\"User frame (0-9)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    value = fields.Int(required=True, description=\"Value to write\")$/", "language": "Python", "kind": "variable", "scope": "ModbusWriteSchema", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    x = fields.Float(required=True, description=\"X coordinate (mm)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    y = fields.Float(required=True, description=\"Y coordinate (mm)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}, {"_type": "tag", "name": "z", "path": "/home/kavia/workspace/code-generation/deltaarm-robot-emulator-54-63/ros2_emulator_backend/app/routes/delta_api.py", "pattern": "/^    z = fields.Float(required=True, description=\"Z coordinate (mm)\")$/", "language": "Python", "kind": "variable", "scope": "SetPointSchema", "scopeKind": "class"}], "hash": "466db3d2a5157a1b759702155d57021c", "format-version": 4, "code-base-name": "ros2_emulator_backend", "filename": "ros2_emulator_backend/app/routes/delta_api.py", "fields": [{"name": "address = fields.Int(required=True, description=\"Register address (hex or decimal)\")", "scope": "ModbusReadSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delay = fields.Float(required=False, description=\"Delay time in seconds\")", "scope": "DORequestSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "length = fields.Int(required=False, description=\"Number of consecutive pins to read\")", "scope": "DIRequestSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "name = fields.Str(required=True, description=\"Point name (must start with GL_)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "pin = fields.Int(required=True, description=\"Pin number (1-12)\")", "scope": "DORequestSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "pin = fields.Int(required=True, description=\"Pin number (1-24)\")", "scope": "DIRequestSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "point_num = fields.Int(required=True, description=\"Point number (1-1000)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "rx = fields.Float(required=False, default=0.0, description=\"RX rotation (degrees)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "ry = fields.Float(required=False, default=0.0, description=\"RY rotation (degrees)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "rz = fields.Float(required=False, default=0.0, description=\"RZ rotation (degrees)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "script = fields.Str(required=True, description=\"Lua script code to execute\")", "scope": "ScriptExecuteSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "size = fields.Str(required=True, description=\"W (16-bit) or DW (32-bit)\")", "scope": "ModbusReadSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "status = fields.Str(required=True, description=\"ON or OFF\")", "scope": "DORequestSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "tf = fields.Int(required=False, default=0, description=\"Tool frame (0-9)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "uf = fields.Int(required=False, default=0, description=\"User frame (0-9)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "value = fields.Int(required=True, description=\"Value to write\")", "scope": "ModbusWriteSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "x = fields.Float(required=True, description=\"X coordinate (mm)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "y = fields.Float(required=True, description=\"Y coordinate (mm)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "z = fields.Float(required=True, description=\"Z coordinate (mm)\")", "scope": "SetPointSchema", "scopeKind": "class", "description": "unavailable"}]}